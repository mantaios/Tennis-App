<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <title>Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ Î‘Î³ÏÎ½Î±</title>
  <style>
/* --- Body & Î³ÎµÎ½Î¹ÎºÏŒ layout --- */
body {
    background-color: #f5f5f5;  
    color: #111;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 20px;
}

/* --- Î£ÏÎ½Î´ÎµÏƒÎ¼Î¿Ï‚ ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î®Ï‚ --- */
.back-link {
    display: inline-block;
    margin-bottom: 20px;
    color: #000;
    text-decoration: none;
    font-weight: bold;
    font-size: 1rem;
    transition: color 0.2s;
}
.back-link:hover {
    color: #e91e63;
}

/* --- Player Header --- */
.players-header {
    display: flex;
    justify-content: center; /* ÎºÎµÎ½Ï„ÏÎ¬ÏÎ¿Ï…Î¼Îµ Î¿Î»ÏŒÎºÎ»Î·ÏÎ¿ Ï„Î¿ header */
    align-items: flex-start; /* ÎµÏ…Î¸Ï…Î³ÏÎ¬Î¼Î¼Î¹ÏƒÎ· ÏƒÏ„Î·Î½ ÎºÎ¿ÏÏ…Ï†Î® */
    gap: 70px;               /* Î±Ï€ÏŒÏƒÏ„Î±ÏƒÎ· Î¼ÎµÏ„Î±Î¾Ï Ï„Ï‰Î½ Î´ÏÎ¿ Ï€Î±Î¹ÎºÏ„ÏÎ½ (Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ·) */
    margin: 0 auto 25px;
}

.player {
    display: flex;
    flex-direction: column; /* ÎµÎ¹ÎºÏŒÎ½Î± Ï€Î¬Î½Ï‰, ÏŒÎ½Î¿Î¼Î± ÎºÎ¬Ï„Ï‰ */
    align-items: center;    /* ÏƒÏ„Î¿ ÎºÎ­Î½Ï„ÏÎ¿ ÎºÎ¬Î¸ÎµÏ„Î± */
    width: 120px;           /* Ï€Î»Î¬Ï„Î¿Ï‚ container */
}

.player img {
    width: 100px;
    height: 100px;
    border-radius: 12px;
    background-color: #ddd;
    object-fit: cover;
    margin-bottom: 8px;
}

.player-name {
    text-align: center;
    font-weight: bold;
    font-size: 1rem;
    color: #222;
}




.stats-title {
    text-align: center;
    font-size: 1.8rem;
    font-weight: bold;
    color: #333;
}

/* --- Container ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÏÎ½ --- */
.stats-container {
    max-width: 900px;
    margin: auto;
    background: #fff;
    padding: 25px 30px;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

/* --- Î£ÎµÎ¹ÏÎ­Ï‚ ÏƒÏ„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÏÎ½ --- */
.stat-row {
    margin-bottom: 26px;
}
.stat-label {
    text-align: center;
    font-weight: bold;
    margin-bottom: 6px;
    color: #111;
    font-size: 15px;
}

/* --- Bars --- */
.bar-wrapper {
    display: grid;
    grid-template-columns: 80px 1fr 80px;
    align-items: center;
    gap: 8px;
}
.stat-value {
    font-size: 0.95rem;
    font-weight: bold;
    text-align: center;
}
.bar {
    position: relative;
    height: 22px;
    background: #eee;
    border-radius: 12px;
    overflow: hidden;
}
.bar-fill-left {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    background: #000;       
    border-radius: 12px 0 0 12px;
}
.bar-fill-right {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    background: #e91e63;     
    border-radius: 0 12px 12px 0;
}

/* --- Game History --- */
.game-history {
    margin: 30px auto;
    padding: 20px;
    border-radius: 12px;
    background: #2c2c2c;       
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    max-width: 850px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.game-history h3 {
    color: #e91e63;
    text-align: center;
    font-size: 1.5rem;
    margin-bottom: 20px;
}
.set-history {
    margin-bottom: 18px;
    padding: 12px 16px;
    border-left: 4px solid #ffc107;  
    background-color: #3a3a3a;
    border-radius: 8px;
    transition: transform 0.2s, box-shadow 0.2s;
}
.set-history:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 10px #eb2106;
}
.set-history strong {
    display: block;
    margin-bottom: 10px;
    font-size: 1.1em;
    color: #fff;
}
.games-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}
.game-score-history {
    flex: 0 0 auto;
    margin: 3px;
    padding: 6px 12px;
    background: #e91e63;      
    border-radius: 6px;
    font-weight: bold;
    color: #fff;
    cursor: default;
    font-size: 0.9em;
    transition: transform 0.2s, background 0.2s;
}
.game-score-history:hover {
    transform: scale(1.05);
    background: #ffc107;     
    color: #000;
}

/* --- Responsive --- */
@media (max-width: 768px) {
    .stats-container { padding: 20px; }
    .game-history { padding: 15px; }
    .game-score-history { font-size: 0.85em; padding: 5px 10px; }
    .players-header { flex-direction: column; gap: 15px; }
}
@media (max-width: 480px) {
    .game-score-history { flex: 1 1 100%; text-align: center; }
}
.top-buttons {
    position: fixed;
    top: 15px;
    right: 20px;
    display: flex;
    gap: 10px;
    z-index: 1000;
}

.top-buttons button {
    font-size: 1.4rem;        /* Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ± emoji */
    padding: 6px 10px;
    border: none;
    border-radius: 50%;
    background: #fff;          /* Ï„Î±Î¹ÏÎ¹Î¬Î¶ÎµÎ¹ Î¼Îµ Ï„Î¿ layout */
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    transition: transform 0.2s, box-shadow 0.2s;
}

.top-buttons button:hover {
    transform: scale(1.2);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
  </style>
<body>
<!-- ÎšÎ¿Ï…Î¼Ï€Î¹Î¬ Ï€Î¬Î½Ï‰ Ï€Î¬Î½Ï‰ -->
<!-- ÎšÎ¿Ï…Î¼Ï€Î¹Î¬ Ï€Î¬Î½Ï‰ Î´ÎµÎ¾Î¹Î¬ -->
<div class="top-buttons">
  <button id="saveBtn">ğŸ’¾</button>
  <button id="editBtn">âœï¸</button>
</div>
<a href="index.html" class="back-link">â† Î Î¯ÏƒÏ‰</a>
  <div class="stats-title">Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬ Î‘Î³ÏÎ½Î±</div>
  </div>
</div>

<div class="stats-container">
  <div id="stats-body"></div>
</div>

<div class="game-history-container">
  <h3>Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Game</h3>
  <div id="gameHistory" class="game-history"></div>
</div>

<script>


  // --- Player 2 ---
 






// --- Î¥Ï€ÏŒÎ»Î¿Î¹Ï€Î¿Ï‚ ÎºÏÎ´Î¹ÎºÎ±Ï‚ Î³Î¹Î± stats, history ÎºÎ±Î¹ selects ---
const statsCategories = [
  { key: "Î†ÏƒÎ¿Î¹", label: "Aces" },
  { key: "ÎÏ„Î±Î¼Ï€Î» Ï†Î¿Î»Ï„", label: "Double Faults" },
  { key: "ÎÎ¹ÎºÎ·Ï„Î­Ï‚", label: "Winners" },
  { key: "Î‘Ï„Î¿Î¼Î¹ÎºÎ¬ Î»Î¬Î¸Î·", label: "Unforced Errors" },
  { key: "Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ 1Î¿Ï… ÏƒÎµÏÎ²Î¯Ï‚", label: "1st Serve Percentage", percent:true },
  { key: "Return Winners", label: "Return Winners" },
  { key: "Return Errors", label: "Return Errors" },
  { key: "Î ÏŒÎ½Ï„Î¿Î¹ Î¼Îµ ÏƒÎµÏÎ²Î¯Ï‚", label: "Service Points" },
  { key: "Î ÏŒÎ½Ï„Î¿Î¹ Ï‡Ï‰ÏÎ¯Ï‚ ÏƒÎµÏÎ²Î¯Ï‚", label: "Points Without Service" },
  { key: 'ÎšÎµÏÎ´Î¹ÏƒÎ¼Î­Î½Î¿Î¹ Î ÏŒÎ½Ï„Î¿Î¹', label: 'Points Won' },
];

function getStats() {
  return {
    player1: JSON.parse(localStorage.getItem("statsPlayer1")) || {},
    player2: JSON.parse(localStorage.getItem("statsPlayer2")) || {}
  };
}
function formatValue(value) { if (!value) return "0"; return value; }
function extractPercent(value) { if(!value) return 0; if(typeof value==="number") return value; return 0; }
function calcSplitBars(val1, val2, statKey) {
    // Î‘Î½ ÎµÎ¯Î½Î±Î¹ ÎšÎµÏÎ´Î¹ÏƒÎ¼Î­Î½Î¿Î¹ Î ÏŒÎ½Ï„Î¿Î¹, Ï…Ï€Î¿Î»ÏŒÎ³Î¹ÏƒÎµ Ï‰Ï‚ Ï€Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎµÏ€Î¯ Ï„Î¿Ï… ÏƒÏ…Î½Î¿Î»Î¹ÎºÎ¿Ï Ï„Ï‰Î½ Î´ÏÎ¿ Ï€Î±Î¹ÎºÏ„ÏÎ½
    if (statKey === 'ÎšÎµÏÎ´Î¹ÏƒÎ¼Î­Î½Î¿Î¹ Î ÏŒÎ½Ï„Î¿Î¹') {
        const total = (val1 || 0) + (val2 || 0);
        return total === 0 ? { p1pct: 50, p2pct: 50 } : { 
            p1pct: Math.round((val1 / total) * 100), 
            p2pct: Math.round((val2 / total) * 100) 
        };
    } else {
        // Î¥Ï†Î¹ÏƒÏ„Î¬Î¼ÎµÎ½Î¿Ï‚ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚
        const total = (val1 || 0) + (val2 || 0);
        return total === 0 ? { p1pct: 50, p2pct: 50 } : { 
            p1pct: Math.round((val1 / total) * 100), 
            p2pct: Math.round((val2 / total) * 100) 
        };
    }
}

function renderStats() {
    const { player1, player2 } = getStats();
    const container = document.getElementById("stats-body");
    container.innerHTML = "";

    statsCategories.forEach(stat => {
        let p1Text = formatValue(player1[stat.key]);
        let p2Text = formatValue(player2[stat.key]);

        const { p1pct, p2pct } = calcSplitBars(
            extractPercent(player1[stat.key]),
            extractPercent(player2[stat.key]),
            stat.key // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î³Î¹Î± ÎµÎ¹Î´Î¹ÎºÏŒ Ï‡ÎµÎ¹ÏÎ¹ÏƒÎ¼ÏŒ "ÎšÎµÏÎ´Î¹ÏƒÎ¼Î­Î½Î¿Î¹ Î ÏŒÎ½Ï„Î¿Î¹"
        );

        // Î‘Î½ ÎµÎ¯Î½Î±Î¹ ÎšÎµÏÎ´Î¹ÏƒÎ¼Î­Î½Î¿Î¹ Î ÏŒÎ½Ï„Î¿Î¹, ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎµ Ï€Î¿ÏƒÎ¿ÏƒÏ„Î¬ Î±Î½Ï„Î¯ Î³Î¹Î± Î±ÏÎ¹Î¸Î¼Î¿ÏÏ‚
        let leftValueText = p1Text;
        let rightValueText = p2Text;
        if (stat.key === 'ÎšÎµÏÎ´Î¹ÏƒÎ¼Î­Î½Î¿Î¹ Î ÏŒÎ½Ï„Î¿Î¹') {
            leftValueText = p1pct + "%";
            rightValueText = p2pct + "%";
        }

        const row = document.createElement("div");
        row.className = "stat-row";

        const label = document.createElement("div");
        label.className = "stat-label";
        label.textContent = stat.label;

        const wrapper = document.createElement("div");
        wrapper.className = "bar-wrapper";

        const leftValue = document.createElement("div");
        leftValue.className = "stat-value";
        leftValue.textContent = leftValueText;

        const bar = document.createElement("div");
        bar.className = "bar";

        const fillLeft = document.createElement("div");
        fillLeft.className = "bar-fill-left";
        fillLeft.style.width = p1pct + "%";

        const fillRight = document.createElement("div");
        fillRight.className = "bar-fill-right";
        fillRight.style.width = p2pct + "%";

        bar.appendChild(fillLeft);
        bar.appendChild(fillRight);

        const rightValue = document.createElement("div");
        rightValue.className = "stat-value";
        rightValue.textContent = rightValueText;

        wrapper.appendChild(leftValue);
        wrapper.appendChild(bar);
        wrapper.appendChild(rightValue);

        row.appendChild(label);
        row.appendChild(wrapper);

        container.appendChild(row);
    });
}


function renderGameHistory(matchData) {
  const container = document.getElementById('gameHistory'); container.innerHTML='';
  matchData.gameHistory.forEach((setGames,setIndex)=>{
    const setDiv=document.createElement('div'); setDiv.className='set-history';
    const setTitle=document.createElement('strong'); setTitle.textContent=`Set ${setIndex+1}:`;
    setDiv.appendChild(setTitle);
    const gamesContainer=document.createElement('div'); gamesContainer.className='games-container';
    setGames.forEach((gameScores,gameIndex)=>{
      const gameDiv=document.createElement('div'); gameDiv.className='game-score-history';
      gameDiv.textContent=`Game ${gameIndex+1}: ${gameScores.join(', ')}`;
      gamesContainer.appendChild(gameDiv);
    });
    setDiv.appendChild(gamesContainer); container.appendChild(setDiv);
  });
}











document.addEventListener("DOMContentLoaded", async () => {
  // 1. Render stats Ï€ÏÏÏ„Î±
  renderStats();

  const matchDataStr = localStorage.getItem('currentMatch');
  const players = JSON.parse(localStorage.getItem('tennisAthletes')) || [];

  if (matchDataStr) {
    const matchData = JSON.parse(matchDataStr);

    ['player1', 'player2'].forEach(playerKey => {
      const playerInfo = matchData[playerKey];
    
    });

    if (!matchData.gameHistory) matchData.gameHistory = [[]];
    renderGameHistory(matchData);
  }

  // 4. Populate selects Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± ÏƒÎ²Î®Î½Î¿Ï…Î¼Îµ ÏŒÎ½Î¿Î¼Î±/Ï†Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î±
  populatePlayerSelect("player1-select","player1","player1-name");
  populatePlayerSelect("player2-select","player2","player2-name");
});

</script>
</body>

</html>
